## Whole Pipeline

This proposal pipeline follow [Perception architecture discussion](https://github.com/autowarefoundation/autoware/discussions/3).
Based on [the original perception architecture figure](https://github.com/scepter914/autoware-radar-architecture-proposal/blob/main/perception/figure/perception_pipeline_original.drawio.svg) drawn by draw.io, I expand sensor fusion architecture to it for radars.


![The pipeline figure for design document](https://raw.githubusercontent.com/scepter914/autoware-radar-architecture-proposal/240c36c613cafd38ce65aa318cd132d3514dfe33/perception/figure/perception_pipeline.drawio.svg)

This figure put on <https://github.com/scepter914/autoware-radar-architecture-proposal/blob/master/perception/figure/perception_pipeline.drawio.svg>

According to radar output types, I suggest two sensor fusion types in perception module.

- The radar fusion in object layer in tracking module
- The radar fusion in `RadarScan` layer in detection module

### The radar fusion in object layer in tracking module

In fusion tracking, radar tracked objects are fused for other tracked objects in tracking module.
Fusion tracking module handles as below objects as discussed in [Perception architecture discussion](https://github.com/autowarefoundation/autoware/discussions/3)

- 3d detected objects from Camera-LiDAR-Radar fusion
- LiDAR tracked 3d objects
- Camera tracked 3d objects
- Radar tracked 3d objects

Radar tracked objects are generated by

- Radar driver (Tracked object Calculated inside the radar devices)
- Radar tracking module, which calculating tracked objects from `RadarScan`

### The sensor fusion with `RadarScan` layer in detection module

In addition to Camera-LiDAR sensor fusion in detection layer is proposed in [Perception architecture discussion](https://github.com/autowarefoundation/autoware/discussions/3), I suggest Camera-LiDAR-Radar sensor fusion in detection layer.
You can select as 3d detection

- Camera-LiDAR-Radar 3d detection using multiple modules
- Camera-LiDAR 3d detection
- LiDAR 3d detection
- Camera 3d detection

#### Camera-LiDAR-Radar 3d detection using multiple modules

 like deep learning module from images, LiDAR pointclouds, and radar scan.
